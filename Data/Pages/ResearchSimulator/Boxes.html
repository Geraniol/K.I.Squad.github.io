<script>

    var FirstCharge = [1, 1, 1, 1, 1, 1]
    var RMBcost = 0
    var ChuCoin = 100000000
    var Nothing = 0
    var overflow = 0
    var boxes = 0
    var ships = [[0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [100, 100, 100, 100], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [100, 100, 0, 100], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [100, 100, 0, 0], [100, 100, 0, 0, 100], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0], [100, 100, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 100, 0, 0, 0, 0, 100, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 100, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 100, 0], [0, 100, 0, 0, 100, 0, 0, 0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0, 0], [0, 0], [0, 0, 0], [0, 0], [0, 0], [100, 100], [0, 0]]

    names = [["诺玛M470级", "重型登陆舰", "支援护卫舰", "防空护卫舰"], ["刺水母级", "战术护卫舰", "防御护卫舰"], ["澄海级", "重型护卫舰", "导弹护卫舰", "防空护卫舰"], ["红宝石级", "重型轨道炮护卫舰", "实验型离子炮护卫舰", "重型防御护卫舰"], ["雷里亚特级", "快速鱼雷护卫舰", "战术鱼雷护卫舰", "隐身护卫舰"], ["卡利莱恩级", "侦查护卫舰", "重炮护卫舰", "特种护卫舰"], ["云海级", "轻型登陆舰", "防空护卫舰"], ["静海级", "导弹护卫舰", "脉冲炮护卫舰", "拦截护卫舰"], ["FG300型", "多用途护卫舰", "装甲护卫舰", "侦查护卫舰"], ["卫士", "支援驱逐舰", "两栖突击舰", "实验型脉冲突击舰"], ["苔原级", "战术驱逐舰", "载机驱逐舰"], ["亚达伯拉级", "重型火炮驱逐舰", "重型攻坚驱逐舰"], ["斗牛级", "脉冲炮驱逐舰", "突击攻击舰", "防御驱逐舰"], ["谷神星级", "载机驱逐舰", "支援驱逐舰", "战术驱逐舰"], ["AC721", "重型运载驱逐舰", "重型导弹驱逐舰", "重型两栖突击舰"], ["阋神星I级", "轻型快速火炮驱逐舰", "重炮驱逐舰", "装甲驱逐舰"], ["创神星级", "轨道炮驱逐舰", "鱼雷驱逐舰"], ["枪骑兵级", "轻型导弹驱逐舰", "综合导弹驱逐舰", "区域防空驱逐舰"], ["康纳马拉混沌级", "轨道炮巡洋舰", "高速等离子体巡洋舰"], ["奇美拉级", "重型巡洋舰", "火炮巡洋舰", "防御巡洋舰"], ["光锥级", "综合导弹巡洋舰", "区域防空巡洋舰", "攻击导弹巡洋舰"], ["卡利斯托", "集束鱼雷袭击舰", "重型鱼雷袭击舰", "重型无人机巡洋舰"], ["猎兵级", "重型载机巡洋舰", "重型火炮巡洋舰"], ["狩猎者级", "载机巡洋舰", "战术载机巡洋舰", "防空载机巡洋舰"], ["艾奥级", "攻坚离子炮巡洋舰", "高速离子炮巡洋舰", "攻城离子炮巡洋舰"], ["CAS066级", "通用巡洋舰", "炮击巡洋舰", "载机巡洋舰"], ["KCCPV2.0", "轻型攻击巡洋舰", "轻型脉冲攻击巡洋舰", "轻型轨道炮巡洋舰", "轻型载机巡洋舰"], ["乌拉诺斯之矛级", "舰首轨道炮系统", "离子炮塔系统", "堡垒火炮系统", "堡垒火炮系统", "堡垒火炮系统", "矿车投射矩阵系统", "炮艇坞舱", "综合损管系统", "分布式轻型武器控制系统", "附加装甲系统", "反导拦截系统"], ["新君士坦丁大帝级", "“伽马风暴”离子攻击系统", "“伽马风暴”投射攻击系统", "“伽马风暴”投射武器系统", "“伽马风暴”投射武器系统", "通用火炮系统", "脉冲防空系统", "防空导弹系统", "附加能源模块", "舰载机模块", "侦查无人机系统", "近程防空系统", "重点防护系统", "损管系统"], ["永恒风暴级", "“雷式”离子生成系统", "实验型等离子投射系统", "“永远的北极星”MARKII", "“永远的北极星”MARKII", "“永远的北极星”MARKII", "通用火炮平台", "通用近防系统", "NT无人机防空系统", "“雷暴”无人机护盾系统", "能量补偿装甲系统", "离子炮塔系统", "脉冲炮塔系统"], ["ST59级", "攻坚轨道炮系统", "舰首火炮系统", "攻坚鱼雷系统", "大型火炮平台", "轨道炮塔阵列", "脉冲炮塔阵列", "综合投射武器平台", "舰载机系统", "区域火控系统", "附加装甲系统", "电磁装甲系统", "防卫重型装甲系统"], ["FSV830", "工程维修系统", "战略资源存储系统", "护卫舰生产线", "护航艇生产线", "战机生产线", "舰载机系统", "维修无人机系统", "预警指挥系统", "协同指挥系统", "干扰指挥系统", "区域防空系统", "护航艇船坞"], ["太阳鲸", "炮艇坞舱", "大型载机系统", "综合武器库", "投射武器平台", "综合火炮平台", "舰船维护系统", "炮艇搭载平台", "舰载机平台", "攻城无人机系统", "防空导弹平台"], ["南十字星元帅级", "“白色闪光”综合武器库", "“白色闪光”综合武器库", "综合舰载机搭载平台", "护航艇坞舱", "附加舰载机系统", "导弹防御模块", "侦查无人机系统", "附加能系统", "火控辅助校准系统"], ["CV3000级", "综合舰载机搭载平台", "综合战机系统", "大型舰载机系统", "“龙式”火炮系统", "防空导弹平台", "导弹防御系统", "炮艇搭载系统", "信息无人机支援平台"], ["米斯特拉", "战斗攻击机"], ["佩刀Aer410", "强击攻击机"], ["刺鳐", "鱼雷轰炸机"], ["孢子A404", "轻型战斗机"], ["B192新大地", "重型攻击机"], ["维塔斯-B010", "轰炸机"], ["维塔斯A021", "重型攻击机"], ["平衡安德森SC020", "侦察机"], ["海氏追随者型", "脉冲战斗机"], ["林鸮A100型", "联合攻击机"], ["牛蛙型", "两栖轰炸机"], ["砂龙", "大气层拦截机"], ["SC002型", "量子侦察机"], ["S-列维9号", "重型鱼雷艇"], ["CV-T800型", "脉冲炮艇"], ["CV-M011型", "重型导弹艇", "重炮艇"], ["虚灵", "隐身导弹艇"], ["星云追逐者", "重型护航艇", "脉冲炮艇"], ["蜂巢守卫者", "重型鱼雷艇"], ["RB7-13型", "导弹艇"], ["CV-II003型", "轻型护航艇"], ["鳐", "装甲护航艇"]]

    function cleanvalue() {
        FirstCharge = [1, 1, 1, 1, 1, 1];
        RMBCost = 0;
        ChuCoin = 0;
        Nothing = 0;
        overflow = 0;
        boxes = 0
        ships = [[0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [100, 100, 100, 100], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [100, 100, 0, 100], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [100, 100, 0, 0], [100, 100, 0, 0, 100], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0], [100, 100, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 100, 0, 0, 0, 0, 100, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 100, 0, 0, 0, 0], [0, 100, 0, 100, 0, 0, 0, 0, 100, 0], [0, 100, 0, 0, 100, 0, 0, 0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0, 0], [0, 0], [0, 0, 0], [0, 0], [0, 0], [100, 100], [0, 0]];
    }

    function charge6() {
        RMBCost += 6;
        if (FirstCharge[0]) {
            FirstCharge[0] = 0;
            ChuCoin += 60 * 2;
        }
        else {
            ChuCoin += 60 + 0;
        }
    }

    function charge30() {
        RMBCost += 30;
        if (FirstCharge[1]) {
            FirstCharge[1] = 0;
            ChuCoin += 300 * 2;
        }
        else {
            ChuCoin += 300 + 10;
        }
    }

    function charge68() {
        RMBCost += 68;
        if (FirstCharge[2]) {
            FirstCharge[2] = 0;
            ChuCoin += 680 * 2;
        }
        else {
            ChuCoin += 680 + 25;
        }
    }

    function charge128() {
        RMBCost += 128;
        if (FirstCharge[3]) {
            FirstCharge[3] = 0;
            ChuCoin += 1280 * 2;
        }
        else {
            ChuCoin += 1280 + 100;
        }
    }

    function charge328() {
        RMBCost += 328;
        if (FirstCharge[4]) {
            FirstCharge[4] = 0;
            ChuCoin += 3280 * 2;
        }
        else {
            ChuCoin += 3280 + 300;
        }
    }

    function charge648() {
        RMBCost += 648;
        if (FirstCharge[5]) {
            FirstCharge[5] = 0;
            ChuCoin += 6480 * 2;
        }
        else {
            ChuCoin += 6480 + 700;
        }
    }

    function buybox300() {
        if (ChuCoin < 300) { }
        else {
            ChuCoin -= 300;
            box(1);
        }
    }

    function buybox888() {
        if (ChuCoin < 888) { }
        else {
            ChuCoin -= 888;
            box(3);
        }
    }

    function box(t) {
        for (var i = 0; i < t; i++) {
            point = Math.floor(Math.random() * 1000);
            if (point >= 0 && point < 900) {
                Nothing += 1;
                document.getElementById("new").innerHTML = "什么都没有呢";
            }
            else if (point >= 900 && point < 928) {
                reward(1, Math.floor(Math.random() * 9));
            }
            else if (point >= 928 && point < 952) {
                reward(2, Math.floor(Math.random() * 9) + 9);
            }
            else if (point >= 952 && point < 964) {
                reward(3, Math.floor(Math.random() * 9) + 18);
            }
            else if (point >= 964 && point < 969) {
                reward(0, Math.floor(Math.random() * 4) + 27);
            }
            else if (point >= 969 && point < 972) {
                reward(0, Math.floor(Math.random() * 1) + 31);
            }
            else if (point >= 972 && point < 975) {
                reward(0, Math.floor(Math.random() * 3) + 32);
            }
            else if (point >= 975 && point < 985) {
                reward(0, Math.floor(Math.random() * 13) + 35);
            }
            else if (point >= 985 && point < 1000) {
                reward(0, Math.floor(Math.random() * 9) + 48);
            }
        }
    }

    function check100(num) {
        return num == 100;
    }

    function reward(level, id) {
        if (ships[id][0] == 0) {
            ships[id][0] = 100;
            ships[id][1] = 100;
            document.getElementById("new").innerHTML = "获得了“" + names[id][0] + "-" + names[id][1] + "”";
        }
        else if (ships[id].every(check100)) {
            overflow += 1;
            document.getElementById("new").innerHTML = "你已经获得“" + names[id][0] + "”的所有蓝图,无法再次获取";
        }
        else {
            while (0 == 0) {
                x = Math.floor(Math.random() * (ships[id].length - 2) + 2);
                if (ships[id][x] != 100) {
                    if (Math.floor(Math.random() * 100) < ships[id][x]) {
                        ships[id][x] = 100;
                        document.getElementById("new").innerHTML = "获得了“" + names[id][0] + "-" + names[id][1] + "”";
                    }
                    else {
                        ships[id][x] += [100, 30, 25, 20][level]
                        if (ships[id][x] == 100) {
                            document.getElementById("new").innerHTML = "获得了“" + names[id][0] + "-" + names[id][x] + "”";
                        }
                        else {
                            document.getElementById("new").innerHTML = "“" + names[id][0] + "-" + names[id][x] + "”研究进度达到" + String(ships[id][x]) + "%";
                        }
                    }
                    break;
                }
            }
        }
    }



    function reload() {
        var blueprintnum = 0;
        var blueprinttypes = 0;
        buybox300();
        boxes += 1;
        var shiplist = "";
        for (var i = 0; i < ships.length; i++) {
            if (ships[i][0] == 100) {
                blueprinttypes += 1;
            }
            for (var j = 1; j < ships[i].length; j++) {
                if (ships[i][j] == 100 && ships[i][0] == 100) {
                    if (document.getElementById(String(i) + "+" + String(j)).getAttribute("style") == "display:none;") {
                        try {
                            document.getElementsByName("newship")[0].setAttribute("name", "oldship");
                        }
                        catch { }
                        document.getElementById(String(i) + "+" + String(j)).setAttribute("style", "display:block;");
                        document.getElementById(String(i) + "+" + String(j)).setAttribute("name", "newship");
                    }
                    blueprintnum += 1;
                }
            }
        }
        // document.getElementById("main").innerHTML = shiplist;
        document.getElementById("boxes").innerHTML = "第" + boxes + "个箱子";
        document.getElementById("bp").innerHTML = "已获得" + blueprinttypes + "/57张蓝图<br>共计" + blueprintnum + "/186个子型号或模块";
        if (blueprintnum == 186) {
            clearInterval(auto);
            document.getElementById("new").innerHTML = "你已经获得了所有图纸";
            document.getElementsByName("newship")[0].setAttribute("name", "oldship");
        }
    }


    function preload() {
        var precontent = "";
        for (var i = 0; i < ships.length; i++) {
            for (var j = 1; j < ships[i].length; j++) {
                precontent += "<div id=" + String(i) + "+" + String(j) + " class=\"shipname\" style=\"display:none;\" >" + names[i][0] + "-" + names[i][j] + "</div>";
            }
        }
        document.getElementById("main").innerHTML = precontent;
    }

</script>
<style>
    * {
        user-select: none;
        overflow-x: hidden;
        background-color: #242424;
        color: #fff;
        text-align: center;
        font-size: 15px;
        line-height: 30px;
        transition: 0.5s;
    }

    #new {
        color: #fb0;
    }

    #boxes {
        color: #888;
    }

    #bp {
        color: #0bf;
    }

    .shipname[name="newship"] {
        color: #8df;
        text-shadow: 0 0 5px #0bf;
        transform: scale(1.5);
    }
</style>

<div id="new"></div>
<div id="boxes"></div>
<div id="bp">开箱模拟器</div>
<div id="main"></div>

<script>
    window.onload = preload();
    var auto = setInterval(function () { reload() }, 1);
</script>